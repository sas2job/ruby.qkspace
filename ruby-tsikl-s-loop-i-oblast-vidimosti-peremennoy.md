# Ruby: Цикл с loop и область видимости переменной

При работе с циклами в руби часто можно столкнуться с проблемой области видимости переменной. Есть код:

```ruby
loop do
a = gets.to_i
break if a.between?(1,10)
end

puts a
```

Если его запустить, получите ошибку:

```ruby
NameError (undefined local variable or method `a' for main:Object)
```

Все дело в том, что `loop` принимает на вход блок (участок кода от `do` до `end`) — как бы анонимный метод.

```ruby
loop do 
  ...
end
```

А в руби переменные, созданные в методах, не видны вне этих методов. Отличие области видимости блока от области видимости метода только в том, что внешняя по отношению к блоку переменная доступна внутри этого блока.

Поэтому если написать так, то все заработает:

```ruby
a = 0

loop do
a = gets.to_i
break if a.between?(1,10)
end

puts a
```

Получается переменная объявленная внутри цикла с `loop` там и умирает, но если она была объявлена до цикла, то она будет жить и после цикла.
