# Ruby: Правила переноса длинных выражений

Иногда требуется записать длинную инструкцию, которое не помещается в одну строку в экране редактора.

По принятому руководству по стилю кодирования в Ruby, как и многих других языках, принято избегать строк длиннее 80 символов.

Некоторые обладатели ultra wide мониторов считают это ограничение устаревшим — но, как говорится, закон есть закон — для общего удобства все должны придерживаться единого компромиссного стандарта.

Рассмотрим пару типовых случаев переноса кода:

### Длинное условие в `if`

Разбить if на несколько строк можно несколькими разными способами

```ruby
# Выровнять условие "столбиком"
if (a == 1 && b == 2) ||
(a == 2 && b == 3) ||
(a == 3 && b == 4)
do_something
end

# Перенести на другую строку
if (a == 1 && b == 2) || (a == 2 && b == 3) ||
(a == 3 && b == 4)
do_something
end

# Вынести условие в переменную/метод
condition1 = a == 1 && b == 2
condition2 = a == 2 && b == 3
condition3 = a == 3 && b == 4
if condition1 && condition2 && condition3
do_something
end
```

Обратите внимание: *условие* всегда начинается на одной строке с `if`. Для `elsif` всё аналогично.

### Длинная строка

Слишком длинную строку можно разбить с помощью сложения `+`, либо экранирования переноса `\`:

```ruby
name = "Божиею поспешествующею милостию Николай Вторый," +
"император и самодержец Всероссийский, Московский, " +
"Киевский, Владимирский, Новгородский; царь Казанский, ..."

name = "Божиею поспешествующею милостию Николай Вторый," \
"император и самодержец Всероссийский, Московский, " \
"Киевский, Владимирский, Новгородский; царь Казанский, ..."
```

Обратите внимание: разрешено ровно два варианта расставления отступов — "под два пробела" (как выше) или "столбиком":

```ruby
name = "Божиею поспешествующею милостию Николай Вторый," \
"император и самодержец Всероссийский, Московский, " \
"Киевский, Владимирский, Новгородский; царь Казанский, ..."
```

### Длинные аргументы метода

Если аргументы метода слишком длинные, действуют похожие правила (разрешены только эти два варианта):
```ruby
# Стандартный вариант для нормальных ребят
do_something(
argument1,
arugemnt2,
arugement3
)

# Вариант для эстетов
do_something(argument1,
argument2,
argument3)
```

*Обратите внимание на закрывающую скобку*. В первом случае она обязательно на новой строке, во втором она обязательно на строке вместе с последним аргументом.

На каждой строке может быть, в обоих случаях, по нескольку аргументов — хотя обычно это выглядит не очень понятно.

### Длинные элементы массива

Аналогично предыдущему пункту

```ruby
# Стандартный вариант
things = [
"машина",
"дача",
"квартира"
]

# Тоже приемлимый
things = ["машина",
"дача",
"квартира"]

# Можно и так
things =
["машина", "дача",
"квартира"]
```

Снова обратите внимание на положение открывающей и закрывающей скобки и отступы — они должны в каждом случае точно соответствовать иллюстрации.

### Длинные строки в массиве

Комбинируя вышесказанное, вот как я бы организовал длинные строки в массиве:

```ruby
things = [
"Какая-то очень длинная строка, " \
"занимающая несколько линий файла",
"Ещё одна очень длинна строка, " \
"которая всё никак и никак не " \
"закончится"
]
```

Склонные к безостановочному творчеству читатели могут использовать другие варианты — но они обязательно должны быть комбинацией из предложенных выше :)
