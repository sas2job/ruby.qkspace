# Ruby: Чем отличаются ^ и $ от \A и \z в регулярных выражениях?

Уверен, при работе с регулярками в руби вы встречали в качестве обозначения начала строки и `^` и `\A`, а в качестве обозначения конца строки — и `$` и `\z`. Чем они отличаются, что предпочтительнее, когда и почему?

Вкратце: `^` матчится как на начало текста, так и на начало очередной строки текста. Аналогично `$` как на конец текста, так и на перевод строки.

Соответственно, вот так ведут себя эти матчеры в коде:

```ruby
"111\n<script>hack;</script>".match?(/^111$/)
# => true

"111\n<script>hack;</script>".match?(/\A111\z/)
# => false
```

Поэтому, например, если использовать в веб-форме `^` и `$`, пользователь может засунуть туда многострочные мусорные или вредоносные данные.

Поэтому предпочтительнее использовать `\A` и `\z`.

Забегая вперёд, Rails заботится о безопасности и кинет ошибку при использовании в валидации `^` и `$`, попросив явно указать ключ `multiline: true`.

Но нужно самому помнить о том, что `^` и `$` соответствуют началу и концу строчки (line), а не началу и концу строки (string).
